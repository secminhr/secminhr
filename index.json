[{"content":"From the editorial:\nWe can freely use every battery except the largest 4 to increase the total running time. Because we can freely swap batteries in 0 time, all the extra power is interchangeable. We can take this extra power and \u0026ldquo;transfer\u0026rdquo; it to the batteries in live. Let extra be the sum of all the extra power.\nIt seems to me that it claims that the number of batteries in the \u0026ldquo;extra\u0026rdquo; part doesn\u0026rsquo;t matter, but how could 7 batteries with power 1 the same as 1 batteries with power 7?\nI couldn\u0026rsquo;t see it.\nAfter some of discussions with colleagues, I got some idea of formalism.\nNotations We use $n$ as number of computers and $m$ as numbers of batteries. Some additional notations:\n$battery_t^i$: the power left in the i-th largest battery at time $t$. $battery_t = [battery_t^1, battery_t^2, ..., battery_t^m]$ For $1 \\le i \\le j \\le m$, $battery_t[i, j] = [battery_i, battery_{i+1}, ..., battery_j]$ For $i \u003e j$, $battery_t[i, j] = []$ $L^x_t$: the number of batteries with $x$ power left at time $t$. In essence, $L_t^x = length(filter\\ (=x)\\ battery_t)$ For $1 \\le i \\le j \\le m$, $L_t^x[i, j] = length(filter\\ (=x)\\ battery_t[i, j])$ Note that for $1 \\le k \\le m$, we have $L_t^x = L_t^x[1, k] + L_t^x[k+1, m]$ Therefore, the following represents that time $t$ is reachable. $$ \\begin{equation} m - L_{t-1}^0 \\ge n \\tag{reachability} \\end{equation} $$Optimal strategy In order to lasts as long as possible, we always choose the largest $n$ batteries to insert to each computer, so the $n$ largest batteries will have 1 power reduced.\nThis strategy requires that if $t$ is reachable, then $L_{t-1}^0[1, n] = 0$, and that $L_t^x$ has the following relation $$ \\begin{equation} L_t^x = L_{t-1}^{x+1}[1, n] + L_{t-1}^x[n+1, m] \\tag{L-rec} \\end{equation} $$ (A battery with $x$ power left at $t$ is either a battery within $n$ largest and has $x+1$ power at $t-1$, or a battery outside of the $n$ largest and has $x$ power at $t-1$)\nAt the same time, the sum of power of batteries should be reduced by $n$. $$ \\begin{equation} \\sum_{i=1}^m battery_{t-1}^i = n + \\sum_{i=1}^m battery_t^i \\tag{B-rec} \\end{equation} $$Note specifically that $\\sum_{i=1}^m battery_{t-1}^i = \\sum_{i=1}^{m-L_0^0} battery_{t-1}^i$\nProve of validity of binary search For the binary search approach in editoral to work, we must prove that $$ \\sum_{i=1}^m min(t_1, battery_0^i) \\ge nt_1 \\iff \\forall 0 \\le t \u003c t_1. m-L_t^0\\ge n $$Proving the following will be sufficient, since our original goal is an immediate result of it, as $\\forall b \\in [min(t_1, battery_0^i)\\ |\\ 1 \\le i \\le m]$ we have $b \\le t_1$. $$ \\text{if } \\forall b \\in battery_0^i.\\ b \\le t_1 \\text{then} \\\\ \\sum_{i=1}^m battery_0^i \\ge nt_1 \\iff \\forall 0 \\le t \u003c t_1. m-L_t^0\\ge n $$$\\implies$ We have assumptions $\\forall b \\in battery_0^i \\le t_1$ and $\\sum_{i=1}^m battery_0^i \\ge nt_1$ We prove by induction on $t$ from $0$ to $t_1 - 1$.\nBase: $t = 0$ $$ nt_1 \\le \\sum_{i=1}^m battery_0^i = \\sum_{i=1}^{m-L_0^0} battery_0^i \\le \\sum_{i=1}^{m-L_0^0}t_1 = (m-L_0^0)t_1 $$ Thus $n \\le m-L_0^0$\nInduction Now we additionally have the assumption $m-L_{t-1}^0 \\ge n$, and want to have $m-L_t^0 \\ge n$. By definition of reachability and the induction assumption, $t$ is reachable. $$ \\begin{aligned} m-L_t^0 \u0026= m-(L_{t-1}^1[1, n] + L_{t-1}^0[n+1, m])\\ \\ \\ \\ \\ \\ \\text{(L-rec)}\\\\ \u0026=m-(L_{t-1}^1[1, n] + L_{t-1}^0 - L_{t-1}^0[1, n])\\\\ \u0026=m-L_{t-1}^0+(L_{t-1}^0[1, n] - L_{t-1}^1[1, n]) \\\\ \u0026=m-L_{t-1}^0-(L_{t-1}^1[1, n] - L_{t-1}^0[1, n]) \\\\ \u0026\\ge n-(L_{t-1}^1[1, n] - L_{t-1}^0[1, n])\\\\ \u0026=n-L_{t-1}^1[1, n] \\end{aligned} $$$L_{t-1}^1[1, n] \\ge 0$ is a must since it\u0026rsquo;s a length, thus $m-L_t^0 \\ge n-L_{t-1}^1[1, n] \\ge n$\n$\\impliedby$ We have assumptions $\\forall b \\in battery_0^i \\le t_1$ and $\\forall 0 \\le t \u003c t_1. m-L_t^0 \\ge n$\nBy definition, $t+1$ is reachable (thus ranging from $1$ to $t_1$). We can apply $\\text{B-rec}$ to calculate.\n$$ \\begin{aligned} \\sum_{i=1}^m battery_0^i \u0026= n + \\sum_{i=1}^m battery_1^i \\\\ \u0026=2n+\\sum_{i=1}^m battery_2^i\\\\ \u0026= 3n + ...\\\\ \u0026= t_1n+\\sum_{i=1}^m battery_{t_1}^i \\ge nt_1 \\end{aligned} $$Both direction is thus proved.\n","permalink":"https://secminhr.github.io/secminhr/posts/2025-12-02-0111/","summary":"\u003cp\u003eFrom the editorial:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWe can freely use every battery except the largest 4 to increase the total running time. Because we can freely swap batteries in 0 time, all the extra power is interchangeable. We can take this extra power and \u0026ldquo;transfer\u0026rdquo; it to the batteries in live. Let extra be the sum of all the extra power.\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003eIt seems to me that it claims that the number of batteries in the \u0026ldquo;extra\u0026rdquo; part doesn\u0026rsquo;t matter, but how could 7 batteries with power 1 the same as 1 batteries with power 7?\u003c/p\u003e","title":"Validity of Binary Search in Leetcode 2141"},{"content":"先記錄一下觀眾的提示：\n我們先計算 prefix 來獲得後續計算一定範圍值的內容 ​我們要找區間和，通過 prefix[j] - prefix[i - 1] 可以獲得 i j sum(i ~ j) 的區間和 ​接著我們要推論根據 j 這個位置，滿足題目要求的合理 i 是多少？ ​這邊做一個反向思考，從j往前看 ​先不討論j~n ​我們可以通過 j - i + 1 % k == 0 這個題目需求知道， i = 所有 5 mod j 餘數相同的值 ​接著什麼樣是我們需要的？ Maximum sum 所以我們會希望找到所有 i 當中 prefix[i] 最小的 j - i + 1 % k == 0 應該是範圍 [i, j], 讓我們用 [i, j) 規定 i \u0026lt; j 看會不會簡單一點。\n根據提示，給定一個 j \u0026gt; 0。我們要找一個 subarray [i, j) 使其為有 max sum 且 (j - i) % k == 0。 那麼，我們推 i 的話，(j - i) % k == 0 =\u0026gt; j % k == i % k，讓 j % k = j % k = r，那麼有 i = nk + r, 0 \u0026lt;= n, j = mk + r, 0 \u0026lt;= m, 並且因為 i \u0026lt; j 我們會要求 n \u0026lt; m。如此一來 j - i = (m - n)k \u0026gt;= k\n現在我們有所有 i 了，要求 i 裡面 prefix[i] 中最小的，讓我們用 min_prefix_i[j] 來表示來指定 j 時最小 prefix[i] 的 i。注意到對所有 d \u0026lt; k, min_prefix_i[j] != min_prefix_i[j - d]，而若 min_prefix_i[j] != j - k，則 min_prefix_i[j] = min_prefix_i[j - k]\n恩，完全不知道有什麼用\n","permalink":"https://secminhr.github.io/secminhr/posts/2025-11-27-leetcode-3381-%E8%B7%9F%E5%8F%B0/","summary":"\u003cp\u003e先記錄一下觀眾的提示：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e我們先計算 prefix 來獲得後續計算一定範圍值的內容\u003c/li\u003e\n\u003cli\u003e​我們要找區間和，通過 prefix[j] - prefix[i - 1] 可以獲得 i j sum(i ~ j) 的區間和\u003c/li\u003e\n\u003cli\u003e​接著我們要推論根據 j 這個位置，滿足題目要求的合理 i 是多少？\u003c/li\u003e\n\u003cli\u003e​這邊做一個反向思考，從j往前看\u003c/li\u003e\n\u003cli\u003e​先不討論j~n\u003c/li\u003e\n\u003cli\u003e​我們可以通過 j - i + 1 % k == 0 這個題目需求知道， i = 所有 5 mod j 餘數相同的值\u003c/li\u003e\n\u003cli\u003e​接著什麼樣是我們需要的？ Maximum sum 所以我們會希望找到所有 i 當中 prefix[i] 最小的\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ej - i + 1 % k == 0 應該是範圍 [i, j], 讓我們用 [i, j) 規定 i \u0026lt; j 看會不會簡單一點。\u003c/p\u003e","title":"Leetcode 3381 跟台"},{"content":"This is a testing article.\n","permalink":"https://secminhr.github.io/secminhr/posts/2025-11-27-test-article/","summary":"\u003cp\u003eThis is a testing article.\u003c/p\u003e","title":"test article"},{"content":"This is a test draft.\n","permalink":"https://secminhr.github.io/secminhr/posts/2025-11-27-test-draft/","summary":"\u003cp\u003eThis is a test draft.\u003c/p\u003e","title":"test draft"}]